# Linux Production Environment Configuration for RoryK Backend
# Copy this file to .env and update the values for your production environment

# Server Configuration
PORT=3001
NODE_ENV=production

# Database Configuration - Local MongoDB
MONGODB_URI=mongodb://roryk_app:roryk-app-password-2024@localhost:27017/roryk?authSource=roryk

# JWT Configuration - CRITICAL: Change this in production!
JWT_SECRET=CHANGE-THIS-TO-A-SECURE-32-PLUS-CHARACTER-SECRET-KEY-FOR-PRODUCTION

# Stripe Configuration - Use LIVE keys in production
STRIPE_SECRET_KEY=sk_live_your_live_stripe_secret_key_here
STRIPE_PUBLISHABLE_KEY=pk_live_your_live_stripe_publishable_key_here
STRIPE_WEBHOOK_SECRET=whsec_your_webhook_secret_here

# CORS Configuration - Update with your production domain
FRONTEND_URL=https://yourdomain.com

# Email Configuration (SMTP) - Configure for production
SMTP_HOST=smtp.youremailprovider.com
SMTP_PORT=587
SMTP_SECURE=false
SMTP_USER=your-email@yourdomain.com
SMTP_PASS=your-email-password-or-app-password
EMAIL_FROM=noreply@yourdomain.com

# Security Configuration
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100

# Logging Configuration
LOG_LEVEL=info
LOG_FILE=logs/roryk-backend.log

# Production Security Headers
HELMET_ENABLED=true
CORS_ORIGIN=https://yourdomain.com
TRUST_PROXY=true

# Session Configuration
SESSION_SECRET=your-session-secret-change-in-production-32-plus-characters
SESSION_SECURE=true
SESSION_SAME_SITE=strict

# File Upload Configuration
MAX_FILE_SIZE=10485760
UPLOAD_PATH=/uploads
ALLOWED_FILE_TYPES=jpg,jpeg,png,pdf

# External API Configuration
EXTERNAL_API_TIMEOUT=30000
EXTERNAL_API_RETRIES=3

# Performance Configuration
CLUSTER_WORKERS=auto
KEEP_ALIVE_TIMEOUT=65000
HEADERS_TIMEOUT=66000

# Development vs Production Flags
DEBUG_MODE=false
VERBOSE_LOGGING=false
ENABLE_SWAGGER=false
ENABLE_PROFILING=false

# Linux-specific Configuration
# PM2 will handle process management
PM2_ENABLED=true

# Health Check Configuration
HEALTH_CHECK_ENABLED=true
HEALTH_CHECK_PATH=/api/health

# Backup Configuration (for automated backups)
BACKUP_ENABLED=true
BACKUP_SCHEDULE=0 2 * * *
BACKUP_RETENTION_DAYS=30
BACKUP_PATH=/backups/mongodb

# Monitoring Configuration
METRICS_ENABLED=true
METRICS_PORT=9090
MONITORING_ENABLED=true

# SSL Configuration (if terminating SSL at application level)
# Usually handled by Nginx in production
SSL_ENABLED=false
SSL_CERT_PATH=/etc/ssl/certs/yourdomain.com.crt
SSL_KEY_PATH=/etc/ssl/private/yourdomain.com.key

# Cache Configuration (if using Redis)
REDIS_ENABLED=false
REDIS_URL=redis://localhost:6379
CACHE_TTL=3600

# Notification Configuration
WEBHOOK_URL=https://yourdomain.com/webhooks
NOTIFICATION_QUEUE_SIZE=1000

# Linux System Integration
SYSTEMD_INTEGRATION=false
LOG_TO_SYSLOG=false
PID_FILE=/var/run/roryk-backend.pid

# Production Optimization
NODE_OPTIONS=--max-old-space-size=2048
UV_THREADPOOL_SIZE=4

# Environment Validation
REQUIRED_ENV_VARS=JWT_SECRET,STRIPE_SECRET_KEY,MONGODB_URI,FRONTEND_URL